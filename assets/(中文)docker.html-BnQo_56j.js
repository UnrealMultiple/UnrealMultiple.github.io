import{_ as i,c as a,a as n,o as l}from"./app-CVSnDHte.js";const e={};function h(t,s){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="docker-设置" tabindex="-1"><a class="header-anchor" href="#docker-设置"><span>Docker 设置</span></a></h1><p>为了在 Docker 容器中运行 TShock，您需要为以下目录设置挂载点：</p><ul><li><code>/tshock</code>（TShock 配置文件、日志和崩溃报告）</li><li><code>/worlds</code></li><li><code>/plugins</code></li><li><code>/server</code>（可选，如果您想挂载 TShock 的工作目录）</li></ul><p>这些文件夹可以使用 <code>-v &lt;主机文件夹&gt;:&lt;容器路径&gt;</code> 进行挂载</p><p>开放端口也可以使用 <code>-p &lt;主机端口&gt;:&lt;容器端口&gt;</code> 传递。</p><ul><li><code>7777</code> 用于 Terraria</li><li><code>7878</code> 用于 TShock 的 REST API</li></ul><p>例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用 buildx 构建镜像并加载到 docker 中</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> buildx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tshock:latest</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --load</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 运行镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 7777:7777</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 7878:7878</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/cider/tshock/:/tshock</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/cider/.local/share/Terraria/Worlds:/worlds</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/cider/tshock/plugins:/plugins</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tshock:latest</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -world</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /worlds/backflip.wld</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -motd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;OMFG DOCKER&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="为其他平台构建" tabindex="-1"><a class="header-anchor" href="#为其他平台构建"><span>为其他平台构建</span></a></h2><p>使用 <code>docker buildx</code>，您可以为 TShock 构建<a href="https://docs.docker.com/build/building/multi-platform/" target="_blank" rel="noopener noreferrer">多平台镜像</a>。</p><p>例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用 buildx 构建镜像并加载到 docker 中</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> buildx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tshock:linux-arm64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> linux/arm64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --load</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 运行镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 7777:7777</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 7878:7878</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/cider/tshock/:/tshock</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/cider/.local/share/Terraria/Worlds:/worlds</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/cider/tshock/plugins:/plugins</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tshock:linux-arm64</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           -world</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /worlds/backflip.wld</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -motd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ARM64 ftw&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-docker-compose" tabindex="-1"><a class="header-anchor" href="#使用-docker-compose"><span>使用 Docker Compose</span></a></h2><p>如果您已安装 <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose</a>，您可以跳过显式构建镜像，而是使用如下的 <code>docker-compose.yml</code> 文件：</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  terraria</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">https://github.com/Pryaxis/TShock.git</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        TARGETPLATFORM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">linux/amd64</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">terraria</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./tshock/:/tshock&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./worlds:/worlds&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./plugins:/plugins&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/etc/localtime:/etc/localtime:ro&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;7777:7777&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;7878:7878&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 如果您不使用 REST 服务，可以删除此项</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-world /worlds/my_world.wld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要以交互方式运行服务器（例如生成世界），请使用 <code>docker compose run --rm terraria</code>（暂时不使用 <code>command:</code>）。 然后，您可以使用 <code>docker compose up -d</code> 在后台运行它，并让它随您的主机系统自动重启。</p><h2 id="下载官方镜像" tabindex="-1"><a class="header-anchor" href="#下载官方镜像"><span>下载官方镜像</span></a></h2><p>TShock <a href="https://github.com/Pryaxis/TShock/pkgs/container/tshock" target="_blank" rel="noopener noreferrer">会为每次提交自动发布镜像</a>。您也可以使用<a href="https://github.com/Pryaxis/TShock/pkgs/container/tshock/tag=nuget-release" target="_blank" rel="noopener noreferrer">来自 nuget 的最新发布/发行版本</a>。通过使用 <code>nuget-release</code> 标签，您实际上引用的是 TShock 的最新稳定版本。通过使用 <code>general-devel</code>，您实际上拥有了 TShock 的最新开发版本。我们还会自动为所有发布版本打上标签，例如 <code>5.2.4</code> 是一个有效的标签。</p>`,18)])])}const p=i(e,[["render",h]]),r=JSON.parse('{"path":"/zh/tshock-wiki/(%E4%B8%AD%E6%96%87)docker.html","title":"Docker 设置","lang":"zh-CN","frontmatter":{"description":"Docker 设置 为了在 Docker 容器中运行 TShock，您需要为以下目录设置挂载点： /tshock（TShock 配置文件、日志和崩溃报告） /worlds /plugins /server（可选，如果您想挂载 TShock 的工作目录） 这些文件夹可以使用 -v <主机文件夹>:<容器路径> 进行挂载 开放端口也可以使用 -p <主机端...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker 设置\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"],["meta",{"property":"og:url","content":"http://docs.terraria.ink/zh/tshock-wiki/(%E4%B8%AD%E6%96%87)docker.html"}],["meta",{"property":"og:site_name","content":"TShock中文插件库"}],["meta",{"property":"og:title","content":"Docker 设置"}],["meta",{"property":"og:description","content":"Docker 设置 为了在 Docker 容器中运行 TShock，您需要为以下目录设置挂载点： /tshock（TShock 配置文件、日志和崩溃报告） /worlds /plugins /server（可选，如果您想挂载 TShock 的工作目录） 这些文件夹可以使用 -v <主机文件夹>:<容器路径> 进行挂载 开放端口也可以使用 -p <主机端..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}]]},"git":{},"autoDesc":true,"filePathRelative":"zh/tshock-wiki/(中文)docker.md"}');export{p as comp,r as data};
